"use strict";(globalThis.webpackChunksegment_push_plugin_demo=globalThis.webpackChunksegment_push_plugin_demo||[]).push([["nm_rc-field-form-_4feb1"],{5260:(Gt,ke,Y)=>{var Zt={name:"segment-push-plugin-demo",version:"1.17.0"};Y.r(ke),Y.d(ke,{Field:()=>Ve,FieldContext:()=>ee,FormProvider:()=>Ye,List:()=>Ke,ListContext:()=>Ze,default:()=>Dt,useForm:()=>Oe,useWatch:()=>Je});var E=Y(2880);function oe(){return oe=Object.assign?Object.assign.bind():function(n){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},oe.apply(this,arguments)}function Xe(n,i){if(n==null)return{};var e={},r=Object.keys(n),t,a;for(a=0;a<r.length;a++)t=r[a],!(i.indexOf(t)>=0)&&(e[t]=n[t]);return e}function fe(n,i){if(n==null)return{};var e=Xe(n,i),r,t;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(t=0;t<a.length;t++)r=a[t],!(i.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,r)||(e[r]=n[r]))}return e}function D(n){return D=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},D(n)}function qe(n,i){if(D(n)!=="object"||n===null)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var r=e.call(n,i||"default");if(D(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(n)}function Se(n){var i=qe(n,"string");return D(i)==="symbol"?i:String(i)}function ne(n,i,e){return i=Se(i),i in n?Object.defineProperty(n,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[i]=e,n}function Re(n,i){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);i&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),e.push.apply(e,r)}return e}function R(n){for(var i=1;i<arguments.length;i++){var e=arguments[i]!=null?arguments[i]:{};i%2?Re(Object(e),!0).forEach(function(r){ne(n,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Re(Object(e)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(e,r))})}return n}function de(n,i){(i==null||i>n.length)&&(i=n.length);for(var e=0,r=new Array(i);e<i;e++)r[e]=n[e];return r}function et(n){if(Array.isArray(n))return de(n)}function tt(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Ne(n,i){if(!!n){if(typeof n=="string")return de(n,i);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return de(n,i)}}function rt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j(n){return et(n)||tt(n)||Ne(n)||rt()}function he(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}function je(n,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Se(r.key),r)}}function ve(n,i,e){return i&&je(n.prototype,i),e&&je(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function $e(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ge(n,i){return ge=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,t){return r.__proto__=t,r},ge(n,i)}function nt(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),i&&ge(n,i)}function ue(n){return ue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ue(n)}function it(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function at(n,i){if(i&&(D(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $e(n)}function ot(n){var i=it();return function(){var r=ue(n),t;if(i){var a=ue(this).constructor;t=Reflect.construct(r,arguments,a)}else t=r.apply(this,arguments);return at(this,t)}}var ut=Y(1403),J=Y(9174),q="RC_FORM_INTERNAL_HOOKS",A=function(){(0,J.ZP)(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},st=E.createContext({getFieldValue:A,getFieldsValue:A,getFieldError:A,getFieldWarning:A,getFieldsError:A,isFieldsTouched:A,isFieldTouched:A,isFieldValidating:A,isFieldsValidating:A,resetFields:A,setFields:A,setFieldValue:A,setFieldsValue:A,validateFields:A,submit:A,getInternalHooks:function(){return A(),{dispatch:A,initEntityValue:A,registerField:A,useSubscribe:A,setInitialValues:A,destroyForm:A,setCallbacks:A,registerWatch:A,getFields:A,setValidateMessages:A,setPreserve:A,getInitialValue:A}}});const ee=st;function me(n){return n==null?[]:Array.isArray(n)?n:[n]}function B(){"use strict";B=function(){return n};var n={},i=Object.prototype,e=i.hasOwnProperty,r=Object.defineProperty||function(h,f,d){h[f]=d.value},t=typeof Symbol=="function"?Symbol:{},a=t.iterator||"@@iterator",s=t.asyncIterator||"@@asyncIterator",c=t.toStringTag||"@@toStringTag";function o(h,f,d){return Object.defineProperty(h,f,{value:d,enumerable:!0,configurable:!0,writable:!0}),h[f]}try{o({},"")}catch{o=function(d,p,V){return d[p]=V}}function u(h,f,d,p){var V=f&&f.prototype instanceof g?f:g,P=Object.create(V.prototype),I=new $(p||[]);return r(P,"_invoke",{value:L(h,d,I)}),P}function l(h,f,d){try{return{type:"normal",arg:h.call(f,d)}}catch(p){return{type:"throw",arg:p}}}n.wrap=u;var v={};function g(){}function O(){}function F(){}var b={};o(b,a,function(){return this});var m=Object.getPrototypeOf,w=m&&m(m(M([])));w&&w!==i&&e.call(w,a)&&(b=w);var y=F.prototype=g.prototype=Object.create(b);function S(h){["next","throw","return"].forEach(function(f){o(h,f,function(d){return this._invoke(f,d)})})}function C(h,f){function d(V,P,I,W){var x=l(h[V],h,P);if(x.type!=="throw"){var z=x.arg,U=z.value;return U&&D(U)=="object"&&e.call(U,"__await")?f.resolve(U.__await).then(function(H){d("next",H,I,W)},function(H){d("throw",H,I,W)}):f.resolve(U).then(function(H){z.value=H,I(z)},function(H){return d("throw",H,I,W)})}W(x.arg)}var p;r(this,"_invoke",{value:function(P,I){function W(){return new f(function(x,z){d(P,I,x,z)})}return p=p?p.then(W,W):W()}})}function L(h,f,d){var p="suspendedStart";return function(V,P){if(p==="executing")throw new Error("Generator is already running");if(p==="completed"){if(V==="throw")throw P;return K()}for(d.method=V,d.arg=P;;){var I=d.delegate;if(I){var W=k(I,d);if(W){if(W===v)continue;return W}}if(d.method==="next")d.sent=d._sent=d.arg;else if(d.method==="throw"){if(p==="suspendedStart")throw p="completed",d.arg;d.dispatchException(d.arg)}else d.method==="return"&&d.abrupt("return",d.arg);p="executing";var x=l(h,f,d);if(x.type==="normal"){if(p=d.done?"completed":"suspendedYield",x.arg===v)continue;return{value:x.arg,done:d.done}}x.type==="throw"&&(p="completed",d.method="throw",d.arg=x.arg)}}}function k(h,f){var d=f.method,p=h.iterator[d];if(p===void 0)return f.delegate=null,d==="throw"&&h.iterator.return&&(f.method="return",f.arg=void 0,k(h,f),f.method==="throw")||d!=="return"&&(f.method="throw",f.arg=new TypeError("The iterator does not provide a '"+d+"' method")),v;var V=l(p,h.iterator,f.arg);if(V.type==="throw")return f.method="throw",f.arg=V.arg,f.delegate=null,v;var P=V.arg;return P?P.done?(f[h.resultName]=P.value,f.next=h.nextLoc,f.method!=="return"&&(f.method="next",f.arg=void 0),f.delegate=null,v):P:(f.method="throw",f.arg=new TypeError("iterator result is not an object"),f.delegate=null,v)}function T(h){var f={tryLoc:h[0]};1 in h&&(f.catchLoc=h[1]),2 in h&&(f.finallyLoc=h[2],f.afterLoc=h[3]),this.tryEntries.push(f)}function N(h){var f=h.completion||{};f.type="normal",delete f.arg,h.completion=f}function $(h){this.tryEntries=[{tryLoc:"root"}],h.forEach(T,this),this.reset(!0)}function M(h){if(h){var f=h[a];if(f)return f.call(h);if(typeof h.next=="function")return h;if(!isNaN(h.length)){var d=-1,p=function V(){for(;++d<h.length;)if(e.call(h,d))return V.value=h[d],V.done=!1,V;return V.value=void 0,V.done=!0,V};return p.next=p}}return{next:K}}function K(){return{value:void 0,done:!0}}return O.prototype=F,r(y,"constructor",{value:F,configurable:!0}),r(F,"constructor",{value:O,configurable:!0}),O.displayName=o(F,c,"GeneratorFunction"),n.isGeneratorFunction=function(h){var f=typeof h=="function"&&h.constructor;return!!f&&(f===O||(f.displayName||f.name)==="GeneratorFunction")},n.mark=function(h){return Object.setPrototypeOf?Object.setPrototypeOf(h,F):(h.__proto__=F,o(h,c,"GeneratorFunction")),h.prototype=Object.create(y),h},n.awrap=function(h){return{__await:h}},S(C.prototype),o(C.prototype,s,function(){return this}),n.AsyncIterator=C,n.async=function(h,f,d,p,V){V===void 0&&(V=Promise);var P=new C(u(h,f,d,p),V);return n.isGeneratorFunction(f)?P:P.next().then(function(I){return I.done?I.value:P.next()})},S(y),o(y,c,"Generator"),o(y,a,function(){return this}),o(y,"toString",function(){return"[object Generator]"}),n.keys=function(h){var f=Object(h),d=[];for(var p in f)d.push(p);return d.reverse(),function V(){for(;d.length;){var P=d.pop();if(P in f)return V.value=P,V.done=!1,V}return V.done=!0,V}},n.values=M,$.prototype={constructor:$,reset:function(f){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(N),!f)for(var d in this)d.charAt(0)==="t"&&e.call(this,d)&&!isNaN(+d.slice(1))&&(this[d]=void 0)},stop:function(){this.done=!0;var f=this.tryEntries[0].completion;if(f.type==="throw")throw f.arg;return this.rval},dispatchException:function(f){if(this.done)throw f;var d=this;function p(z,U){return I.type="throw",I.arg=f,d.next=z,U&&(d.method="next",d.arg=void 0),!!U}for(var V=this.tryEntries.length-1;V>=0;--V){var P=this.tryEntries[V],I=P.completion;if(P.tryLoc==="root")return p("end");if(P.tryLoc<=this.prev){var W=e.call(P,"catchLoc"),x=e.call(P,"finallyLoc");if(W&&x){if(this.prev<P.catchLoc)return p(P.catchLoc,!0);if(this.prev<P.finallyLoc)return p(P.finallyLoc)}else if(W){if(this.prev<P.catchLoc)return p(P.catchLoc,!0)}else{if(!x)throw new Error("try statement without catch or finally");if(this.prev<P.finallyLoc)return p(P.finallyLoc)}}}},abrupt:function(f,d){for(var p=this.tryEntries.length-1;p>=0;--p){var V=this.tryEntries[p];if(V.tryLoc<=this.prev&&e.call(V,"finallyLoc")&&this.prev<V.finallyLoc){var P=V;break}}P&&(f==="break"||f==="continue")&&P.tryLoc<=d&&d<=P.finallyLoc&&(P=null);var I=P?P.completion:{};return I.type=f,I.arg=d,P?(this.method="next",this.next=P.finallyLoc,v):this.complete(I)},complete:function(f,d){if(f.type==="throw")throw f.arg;return f.type==="break"||f.type==="continue"?this.next=f.arg:f.type==="return"?(this.rval=this.arg=f.arg,this.method="return",this.next="end"):f.type==="normal"&&d&&(this.next=d),v},finish:function(f){for(var d=this.tryEntries.length-1;d>=0;--d){var p=this.tryEntries[d];if(p.finallyLoc===f)return this.complete(p.completion,p.afterLoc),N(p),v}},catch:function(f){for(var d=this.tryEntries.length-1;d>=0;--d){var p=this.tryEntries[d];if(p.tryLoc===f){var V=p.completion;if(V.type==="throw"){var P=V.arg;N(p)}return P}}throw new Error("illegal catch attempt")},delegateYield:function(f,d,p){return this.delegate={iterator:M(f),resultName:d,nextLoc:p},this.method==="next"&&(this.arg=void 0),v}},n}function Le(n,i,e,r,t,a,s){try{var c=n[a](s),o=c.value}catch(u){e(u);return}c.done?i(o):Promise.resolve(o).then(r,t)}function se(n){return function(){var i=this,e=arguments;return new Promise(function(r,t){var a=n.apply(i,e);function s(o){Le(a,r,t,s,c,"next",o)}function c(o){Le(a,r,t,s,c,"throw",o)}s(void 0)})}}var lt=Y(6943),ct=Y.n(lt),G="'${name}' is not a valid ${type}",Te={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:G,method:G,array:G,object:G,number:G,date:G,boolean:G,integer:G,float:G,regexp:G,email:G,url:G,hex:G},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}};function Ae(n,i){for(var e=n,r=0;r<i.length;r+=1){if(e==null)return;e=e[i[r]]}return e}var ft=Y(9677),dt=Y(9961),ht=Y(9189);function Me(n,i,e,r){if(!i.length)return e;var t=(0,ht.Z)(i),a=t[0],s=t.slice(1),c;return!n&&typeof a=="number"?c=[]:Array.isArray(n)?c=(0,dt.Z)(n):c=(0,ft.Z)({},n),r&&e===void 0&&s.length===1?delete c[a][s[0]]:c[a]=Me(c[a],s,e,r),c}function vt(n,i,e){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return i.length&&r&&e===void 0&&!Ae(n,i.slice(0,-1))?n:Me(n,i,e,r)}function pe(n){return Array.isArray(n)?mt(n):D(n)==="object"&&n!==null?gt(n):n}function gt(n){if(Object.getPrototypeOf(n)===Object.prototype){var i={};for(var e in n)i[e]=pe(n[e]);return i}return n}function mt(n){return n.map(function(i){return pe(i)})}const Ie=pe;function _(n){return me(n)}function Q(n,i){var e=Ae(n,i);return e}function X(n,i,e){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,t=vt(n,i,e,r);return t}function _e(n,i){var e={};return i.forEach(function(r){var t=Q(n,r);e=X(e,r,t)}),e}function ie(n,i){return n&&n.some(function(e){return xe(e,i)})}function Ue(n){return D(n)==="object"&&n!==null&&Object.getPrototypeOf(n)===Object.prototype}function We(n,i){var e=Array.isArray(n)?j(n):R({},n);return i&&Object.keys(i).forEach(function(r){var t=e[r],a=i[r],s=Ue(t)&&Ue(a);e[r]=s?We(t,a||{}):Ie(a)}),e}function le(n){for(var i=arguments.length,e=new Array(i>1?i-1:0),r=1;r<i;r++)e[r-1]=arguments[r];return e.reduce(function(t,a){return We(t,a)},n)}function xe(n,i){return!n||!i||n.length!==i.length?!1:n.every(function(e,r){return i[r]===e})}function pt(n,i){if(n===i)return!0;if(!n&&i||n&&!i||!n||!i||D(n)!=="object"||D(i)!=="object")return!1;var e=Object.keys(n),r=Object.keys(i),t=new Set([].concat(e,r));return j(t).every(function(a){var s=n[a],c=i[a];return typeof s=="function"&&typeof c=="function"?!0:s===c})}function yt(n){var i=arguments.length<=1?void 0:arguments[1];return i&&i.target&&D(i.target)==="object"&&n in i.target?i.target[n]:i}function He(n,i,e){var r=n.length;if(i<0||i>=r||e<0||e>=r)return n;var t=n[i],a=i-e;return a>0?[].concat(j(n.slice(0,e)),[t],j(n.slice(e,i)),j(n.slice(i+1,r))):a<0?[].concat(j(n.slice(0,i)),j(n.slice(i+1,e+1)),[t],j(n.slice(e+1,r))):n}var Ft=ct();function bt(n,i){return n.replace(/\$\{\w+\}/g,function(e){var r=e.slice(2,-1);return i[r]})}var De="CODE_LOGIC_ERROR";function ye(n,i,e,r,t){return Fe.apply(this,arguments)}function Fe(){return Fe=se(B().mark(function n(i,e,r,t,a){var s,c,o,u,l,v,g,O,F;return B().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return s=R({},r),delete s.ruleIndex,s.validator&&(c=s.validator,s.validator=function(){try{return c.apply(void 0,arguments)}catch(w){return console.error(w),Promise.reject(De)}}),o=null,s&&s.type==="array"&&s.defaultField&&(o=s.defaultField,delete s.defaultField),u=new Ft(ne({},i,[s])),l=le({},Te,t.validateMessages),u.messages(l),v=[],m.prev=9,m.next=12,Promise.resolve(u.validate(ne({},i,e),R({},t)));case 12:m.next=17;break;case 14:m.prev=14,m.t0=m.catch(9),m.t0.errors&&(v=m.t0.errors.map(function(w,y){var S=w.message,C=S===De?l.default:S;return E.isValidElement(C)?E.cloneElement(C,{key:"error_".concat(y)}):C}));case 17:if(!(!v.length&&o)){m.next=22;break}return m.next=20,Promise.all(e.map(function(w,y){return ye("".concat(i,".").concat(y),w,o,t,a)}));case 20:return g=m.sent,m.abrupt("return",g.reduce(function(w,y){return[].concat(j(w),j(y))},[]));case 22:return O=R(R({},r),{},{name:i,enum:(r.enum||[]).join(", ")},a),F=v.map(function(w){return typeof w=="string"?bt(w,O):w}),m.abrupt("return",F);case 25:case"end":return m.stop()}},n,null,[[9,14]])})),Fe.apply(this,arguments)}function wt(n,i,e,r,t,a){var s=n.join("."),c=e.map(function(l,v){var g=l.validator,O=R(R({},l),{},{ruleIndex:v});return g&&(O.validator=function(F,b,m){var w=!1,y=function(){for(var L=arguments.length,k=new Array(L),T=0;T<L;T++)k[T]=arguments[T];Promise.resolve().then(function(){(0,J.ZP)(!w,"Your validator function has already return a promise. `callback` will be ignored."),w||m.apply(void 0,k)})},S=g(F,b,y);w=S&&typeof S.then=="function"&&typeof S.catch=="function",(0,J.ZP)(w,"`callback` is deprecated. Please return a promise instead."),w&&S.then(function(){m()}).catch(function(C){m(C||" ")})}),O}).sort(function(l,v){var g=l.warningOnly,O=l.ruleIndex,F=v.warningOnly,b=v.ruleIndex;return!!g==!!F?O-b:g?1:-1}),o;if(t===!0)o=new Promise(function(){var l=se(B().mark(function v(g,O){var F,b,m;return B().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:F=0;case 1:if(!(F<c.length)){y.next=12;break}return b=c[F],y.next=5,ye(s,i,b,r,a);case 5:if(m=y.sent,!m.length){y.next=9;break}return O([{errors:m,rule:b}]),y.abrupt("return");case 9:F+=1,y.next=1;break;case 12:g([]);case 13:case"end":return y.stop()}},v)}));return function(v,g){return l.apply(this,arguments)}}());else{var u=c.map(function(l){return ye(s,i,l,r,a).then(function(v){return{errors:v,rule:l}})});o=(t?Vt(u):Pt(u)).then(function(l){return Promise.reject(l)})}return o.catch(function(l){return l}),o}function Pt(n){return be.apply(this,arguments)}function be(){return be=se(B().mark(function n(i){return B().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Promise.all(i).then(function(t){var a,s=(a=[]).concat.apply(a,j(t));return s}));case 1:case"end":return r.stop()}},n)})),be.apply(this,arguments)}function Vt(n){return we.apply(this,arguments)}function we(){return we=se(B().mark(function n(i){var e;return B().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=0,t.abrupt("return",new Promise(function(a){i.forEach(function(s){s.then(function(c){c.errors.length&&a([c]),e+=1,e===i.length&&a([])})})}));case 2:case"end":return t.stop()}},n)})),we.apply(this,arguments)}var Et=["name"],Z=[];function Ge(n,i,e,r,t,a){return typeof n=="function"?n(i,e,"source"in a?{source:a.source}:{}):r!==t}var Pe=function(n){nt(e,n);var i=ot(e);function e(r){var t;if(he(this,e),t=i.call(this,r),t.state={resetCount:0},t.cancelRegisterFunc=null,t.mounted=!1,t.touched=!1,t.dirty=!1,t.validatePromise=null,t.prevValidating=void 0,t.errors=Z,t.warnings=Z,t.cancelRegister=function(){var o=t.props,u=o.preserve,l=o.isListField,v=o.name;t.cancelRegisterFunc&&t.cancelRegisterFunc(l,u,_(v)),t.cancelRegisterFunc=null},t.getNamePath=function(){var o=t.props,u=o.name,l=o.fieldContext,v=l.prefixName,g=v===void 0?[]:v;return u!==void 0?[].concat(j(g),j(u)):[]},t.getRules=function(){var o=t.props,u=o.rules,l=u===void 0?[]:u,v=o.fieldContext;return l.map(function(g){return typeof g=="function"?g(v):g})},t.refresh=function(){!t.mounted||t.setState(function(o){var u=o.resetCount;return{resetCount:u+1}})},t.triggerMetaEvent=function(o){var u=t.props.onMetaChange;u==null||u(R(R({},t.getMeta()),{},{destroy:o}))},t.onStoreChange=function(o,u,l){var v=t.props,g=v.shouldUpdate,O=v.dependencies,F=O===void 0?[]:O,b=v.onReset,m=l.store,w=t.getNamePath(),y=t.getValue(o),S=t.getValue(m),C=u&&ie(u,w);switch(l.type==="valueUpdate"&&l.source==="external"&&y!==S&&(t.touched=!0,t.dirty=!0,t.validatePromise=null,t.errors=Z,t.warnings=Z,t.triggerMetaEvent()),l.type){case"reset":if(!u||C){t.touched=!1,t.dirty=!1,t.validatePromise=null,t.errors=Z,t.warnings=Z,t.triggerMetaEvent(),b==null||b(),t.refresh();return}break;case"remove":{if(g){t.reRender();return}break}case"setField":{if(C){var L=l.data;"touched"in L&&(t.touched=L.touched),"validating"in L&&!("originRCField"in L)&&(t.validatePromise=L.validating?Promise.resolve([]):null),"errors"in L&&(t.errors=L.errors||Z),"warnings"in L&&(t.warnings=L.warnings||Z),t.dirty=!0,t.triggerMetaEvent(),t.reRender();return}if(g&&!w.length&&Ge(g,o,m,y,S,l)){t.reRender();return}break}case"dependenciesUpdate":{var k=F.map(_);if(k.some(function(T){return ie(l.relatedFields,T)})){t.reRender();return}break}default:if(C||(!F.length||w.length||g)&&Ge(g,o,m,y,S,l)){t.reRender();return}break}g===!0&&t.reRender()},t.validateRules=function(o){var u=t.getNamePath(),l=t.getValue(),v=Promise.resolve().then(function(){if(!t.mounted)return[];var g=t.props,O=g.validateFirst,F=O===void 0?!1:O,b=g.messageVariables,m=o||{},w=m.triggerName,y=t.getRules();w&&(y=y.filter(function(C){return C}).filter(function(C){var L=C.validateTrigger;if(!L)return!0;var k=me(L);return k.includes(w)}));var S=wt(u,l,y,o,F,b);return S.catch(function(C){return C}).then(function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Z;if(t.validatePromise===v){var L;t.validatePromise=null;var k=[],T=[];(L=C.forEach)===null||L===void 0||L.call(C,function(N){var $=N.rule.warningOnly,M=N.errors,K=M===void 0?Z:M;$?T.push.apply(T,j(K)):k.push.apply(k,j(K))}),t.errors=k,t.warnings=T,t.triggerMetaEvent(),t.reRender()}}),S});return t.validatePromise=v,t.dirty=!0,t.errors=Z,t.warnings=Z,t.triggerMetaEvent(),t.reRender(),v},t.isFieldValidating=function(){return!!t.validatePromise},t.isFieldTouched=function(){return t.touched},t.isFieldDirty=function(){if(t.dirty||t.props.initialValue!==void 0)return!0;var o=t.props.fieldContext,u=o.getInternalHooks(q),l=u.getInitialValue;return l(t.getNamePath())!==void 0},t.getErrors=function(){return t.errors},t.getWarnings=function(){return t.warnings},t.isListField=function(){return t.props.isListField},t.isList=function(){return t.props.isList},t.isPreserve=function(){return t.props.preserve},t.getMeta=function(){t.prevValidating=t.isFieldValidating();var o={touched:t.isFieldTouched(),validating:t.prevValidating,errors:t.errors,warnings:t.warnings,name:t.getNamePath()};return o},t.getOnlyChild=function(o){if(typeof o=="function"){var u=t.getMeta();return R(R({},t.getOnlyChild(o(t.getControlled(),u,t.props.fieldContext))),{},{isFunction:!0})}var l=(0,ut.Z)(o);return l.length!==1||!E.isValidElement(l[0])?{child:l,isFunction:!1}:{child:l[0],isFunction:!1}},t.getValue=function(o){var u=t.props.fieldContext.getFieldsValue,l=t.getNamePath();return Q(o||u(!0),l)},t.getControlled=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=t.props,l=u.trigger,v=u.validateTrigger,g=u.getValueFromEvent,O=u.normalize,F=u.valuePropName,b=u.getValueProps,m=u.fieldContext,w=v!==void 0?v:m.validateTrigger,y=t.getNamePath(),S=m.getInternalHooks,C=m.getFieldsValue,L=S(q),k=L.dispatch,T=t.getValue(),N=b||function(h){return ne({},F,h)},$=o[l],M=R(R({},o),N(T));M[l]=function(){t.touched=!0,t.dirty=!0,t.triggerMetaEvent();for(var h,f=arguments.length,d=new Array(f),p=0;p<f;p++)d[p]=arguments[p];g?h=g.apply(void 0,d):h=yt.apply(void 0,[F].concat(d)),O&&(h=O(h,T,C(!0))),k({type:"updateValue",namePath:y,value:h}),$&&$.apply(void 0,d)};var K=me(w||[]);return K.forEach(function(h){var f=M[h];M[h]=function(){f&&f.apply(void 0,arguments);var d=t.props.rules;d&&d.length&&k({type:"validateField",namePath:y,triggerName:h})}}),M},r.fieldContext){var a=r.fieldContext.getInternalHooks,s=a(q),c=s.initEntityValue;c($e(t))}return t}return ve(e,[{key:"componentDidMount",value:function(){var t=this.props,a=t.shouldUpdate,s=t.fieldContext;if(this.mounted=!0,s){var c=s.getInternalHooks,o=c(q),u=o.registerField;this.cancelRegisterFunc=u(this)}a===!0&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){!this.mounted||this.forceUpdate()}},{key:"render",value:function(){var t=this.state.resetCount,a=this.props.children,s=this.getOnlyChild(a),c=s.child,o=s.isFunction,u;return o?u=c:E.isValidElement(c)?u=E.cloneElement(c,this.getControlled(c.props)):((0,J.ZP)(!c,"`children` of Field is not validate ReactElement."),u=c),E.createElement(E.Fragment,{key:t},u)}}]),e}(E.Component);Pe.contextType=ee,Pe.defaultProps={trigger:"onChange",valuePropName:"value"};function Ot(n){var i=n.name,e=fe(n,Et),r=E.useContext(ee),t=i!==void 0?_(i):void 0,a="keep";return e.isListField||(a="_".concat((t||[]).join("_"))),E.createElement(Pe,oe({key:a,name:t},e,{fieldContext:r}))}const Ve=Ot;var Ct=E.createContext(null);const Ze=Ct;var kt=function(i){var e=i.name,r=i.initialValue,t=i.children,a=i.rules,s=i.validateTrigger,c=E.useContext(ee),o=E.useRef({keys:[],id:0}),u=o.current,l=E.useMemo(function(){var F=_(c.prefixName)||[];return[].concat(j(F),j(_(e)))},[c.prefixName,e]),v=E.useMemo(function(){return R(R({},c),{},{prefixName:l})},[c,l]),g=E.useMemo(function(){return{getKey:function(b){var m=l.length,w=b[m];return[u.keys[w],b.slice(m+1)]}}},[l]);if(typeof t!="function")return(0,J.ZP)(!1,"Form.List only accepts function as children."),null;var O=function(b,m,w){var y=w.source;return y==="internal"?!1:b!==m};return E.createElement(Ze.Provider,{value:g},E.createElement(ee.Provider,{value:v},E.createElement(Ve,{name:[],shouldUpdate:O,rules:a,validateTrigger:s,initialValue:r,isList:!0},function(F,b){var m=F.value,w=m===void 0?[]:m,y=F.onChange,S=c.getFieldValue,C=function(){var N=S(l||[]);return N||[]},L={add:function(N,$){var M=C();$>=0&&$<=M.length?(u.keys=[].concat(j(u.keys.slice(0,$)),[u.id],j(u.keys.slice($))),y([].concat(j(M.slice(0,$)),[N],j(M.slice($))))):(u.keys=[].concat(j(u.keys),[u.id]),y([].concat(j(M),[N]))),u.id+=1},remove:function(N){var $=C(),M=new Set(Array.isArray(N)?N:[N]);M.size<=0||(u.keys=u.keys.filter(function(K,h){return!M.has(h)}),y($.filter(function(K,h){return!M.has(h)})))},move:function(N,$){if(N!==$){var M=C();N<0||N>=M.length||$<0||$>=M.length||(u.keys=He(u.keys,N,$),y(He(M,N,$)))}}},k=w||[];return Array.isArray(k)||(k=[]),t(k.map(function(T,N){var $=u.keys[N];return $===void 0&&(u.keys[N]=u.id,$=u.keys[N],u.id+=1),{name:N,key:$,isListField:!0}}),L,b)})))};const Ke=kt;function St(n){if(Array.isArray(n))return n}function Rt(n,i){var e=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(e!=null){var r,t,a,s,c=[],o=!0,u=!1;try{if(a=(e=e.call(n)).next,i===0){if(Object(e)!==e)return;o=!1}else for(;!(o=(r=a.call(e)).done)&&(c.push(r.value),c.length!==i);o=!0);}catch(l){u=!0,t=l}finally{try{if(!o&&e.return!=null&&(s=e.return(),Object(s)!==s))return}finally{if(u)throw t}}return c}}function Nt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ae(n,i){return St(n)||Rt(n,i)||Ne(n,i)||Nt()}function jt(n){var i=!1,e=n.length,r=[];return n.length?new Promise(function(t,a){n.forEach(function(s,c){s.catch(function(o){return i=!0,o}).then(function(o){e-=1,r[c]=o,!(e>0)&&(i&&a(r),t(r))})})}):Promise.resolve([])}var ze="__@field_split__";function Ee(n){return n.map(function(i){return"".concat(D(i),":").concat(i)}).join(ze)}var $t=function(){function n(){he(this,n),this.kvs=new Map}return ve(n,[{key:"set",value:function(e,r){this.kvs.set(Ee(e),r)}},{key:"get",value:function(e){return this.kvs.get(Ee(e))}},{key:"update",value:function(e,r){var t=this.get(e),a=r(t);a?this.set(e,a):this.delete(e)}},{key:"delete",value:function(e){this.kvs.delete(Ee(e))}},{key:"map",value:function(e){return j(this.kvs.entries()).map(function(r){var t=ae(r,2),a=t[0],s=t[1],c=a.split(ze);return e({key:c.map(function(o){var u=o.match(/^([^:]*):(.*)$/),l=ae(u,3),v=l[1],g=l[2];return v==="number"?Number(g):g}),value:s})})}},{key:"toJSON",value:function(){var e={};return this.map(function(r){var t=r.key,a=r.value;return e[t.join(".")]=a,null}),e}}]),n}();const te=$t;var Lt=["name","errors"],Tt=ve(function n(i){var e=this;he(this,n),this.formHooked=!1,this.forceRootUpdate=void 0,this.subscribable=!0,this.store={},this.fieldEntities=[],this.initialValues={},this.callbacks={},this.validateMessages=null,this.preserve=null,this.lastValidatePromise=null,this.getForm=function(){return{getFieldValue:e.getFieldValue,getFieldsValue:e.getFieldsValue,getFieldError:e.getFieldError,getFieldWarning:e.getFieldWarning,getFieldsError:e.getFieldsError,isFieldsTouched:e.isFieldsTouched,isFieldTouched:e.isFieldTouched,isFieldValidating:e.isFieldValidating,isFieldsValidating:e.isFieldsValidating,resetFields:e.resetFields,setFields:e.setFields,setFieldValue:e.setFieldValue,setFieldsValue:e.setFieldsValue,validateFields:e.validateFields,submit:e.submit,_init:!0,getInternalHooks:e.getInternalHooks}},this.getInternalHooks=function(r){return r===q?(e.formHooked=!0,{dispatch:e.dispatch,initEntityValue:e.initEntityValue,registerField:e.registerField,useSubscribe:e.useSubscribe,setInitialValues:e.setInitialValues,destroyForm:e.destroyForm,setCallbacks:e.setCallbacks,setValidateMessages:e.setValidateMessages,getFields:e.getFields,setPreserve:e.setPreserve,getInitialValue:e.getInitialValue,registerWatch:e.registerWatch}):((0,J.ZP)(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)},this.useSubscribe=function(r){e.subscribable=r},this.prevWithoutPreserves=null,this.setInitialValues=function(r,t){if(e.initialValues=r||{},t){var a,s=le({},r,e.store);(a=e.prevWithoutPreserves)===null||a===void 0||a.map(function(c){var o=c.key;s=X(s,o,Q(r,o))}),e.prevWithoutPreserves=null,e.updateStore(s)}},this.destroyForm=function(){var r=new te;e.getFieldEntities(!0).forEach(function(t){e.isMergedPreserve(t.isPreserve())||r.set(t.getNamePath(),!0)}),e.prevWithoutPreserves=r},this.getInitialValue=function(r){var t=Q(e.initialValues,r);return r.length?Ie(t):t},this.setCallbacks=function(r){e.callbacks=r},this.setValidateMessages=function(r){e.validateMessages=r},this.setPreserve=function(r){e.preserve=r},this.watchList=[],this.registerWatch=function(r){return e.watchList.push(r),function(){e.watchList=e.watchList.filter(function(t){return t!==r})}},this.notifyWatch=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(e.watchList.length){var t=e.getFieldsValue();e.watchList.forEach(function(a){a(t,r)})}},this.timeoutId=null,this.warningUnhooked=function(){},this.updateStore=function(r){e.store=r},this.getFieldEntities=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return r?e.fieldEntities.filter(function(t){return t.getNamePath().length}):e.fieldEntities},this.getFieldsMap=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=new te;return e.getFieldEntities(r).forEach(function(a){var s=a.getNamePath();t.set(s,a)}),t},this.getFieldEntitiesForNamePathList=function(r){if(!r)return e.getFieldEntities(!0);var t=e.getFieldsMap(!0);return r.map(function(a){var s=_(a);return t.get(s)||{INVALIDATE_NAME_PATH:_(a)}})},this.getFieldsValue=function(r,t){if(e.warningUnhooked(),r===!0&&!t)return e.store;var a=e.getFieldEntitiesForNamePathList(Array.isArray(r)?r:null),s=[];return a.forEach(function(c){var o,u="INVALIDATE_NAME_PATH"in c?c.INVALIDATE_NAME_PATH:c.getNamePath();if(!(!r&&((o=c.isListField)===null||o===void 0?void 0:o.call(c))))if(!t)s.push(u);else{var l="getMeta"in c?c.getMeta():null;t(l)&&s.push(u)}}),_e(e.store,s.map(_))},this.getFieldValue=function(r){e.warningUnhooked();var t=_(r);return Q(e.store,t)},this.getFieldsError=function(r){e.warningUnhooked();var t=e.getFieldEntitiesForNamePathList(r);return t.map(function(a,s){return a&&!("INVALIDATE_NAME_PATH"in a)?{name:a.getNamePath(),errors:a.getErrors(),warnings:a.getWarnings()}:{name:_(r[s]),errors:[],warnings:[]}})},this.getFieldError=function(r){e.warningUnhooked();var t=_(r),a=e.getFieldsError([t])[0];return a.errors},this.getFieldWarning=function(r){e.warningUnhooked();var t=_(r),a=e.getFieldsError([t])[0];return a.warnings},this.isFieldsTouched=function(){e.warningUnhooked();for(var r=arguments.length,t=new Array(r),a=0;a<r;a++)t[a]=arguments[a];var s=t[0],c=t[1],o,u=!1;t.length===0?o=null:t.length===1?Array.isArray(s)?(o=s.map(_),u=!1):(o=null,u=s):(o=s.map(_),u=c);var l=e.getFieldEntities(!0),v=function(m){return m.isFieldTouched()};if(!o)return u?l.every(v):l.some(v);var g=new te;o.forEach(function(b){g.set(b,[])}),l.forEach(function(b){var m=b.getNamePath();o.forEach(function(w){w.every(function(y,S){return m[S]===y})&&g.update(w,function(y){return[].concat(j(y),[b])})})});var O=function(m){return m.some(v)},F=g.map(function(b){var m=b.value;return m});return u?F.every(O):F.some(O)},this.isFieldTouched=function(r){return e.warningUnhooked(),e.isFieldsTouched([r])},this.isFieldsValidating=function(r){e.warningUnhooked();var t=e.getFieldEntities();if(!r)return t.some(function(s){return s.isFieldValidating()});var a=r.map(_);return t.some(function(s){var c=s.getNamePath();return ie(a,c)&&s.isFieldValidating()})},this.isFieldValidating=function(r){return e.warningUnhooked(),e.isFieldsValidating([r])},this.resetWithFieldInitialValue=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=new te,a=e.getFieldEntities(!0);a.forEach(function(o){var u=o.props.initialValue,l=o.getNamePath();if(u!==void 0){var v=t.get(l)||new Set;v.add({entity:o,value:u}),t.set(l,v)}});var s=function(u){u.forEach(function(l){var v=l.props.initialValue;if(v!==void 0){var g=l.getNamePath(),O=e.getInitialValue(g);if(O!==void 0)(0,J.ZP)(!1,"Form already set 'initialValues' with path '".concat(g.join("."),"'. Field can not overwrite it."));else{var F=t.get(g);if(F&&F.size>1)(0,J.ZP)(!1,"Multiple Field with path '".concat(g.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(F){var b=e.getFieldValue(g);(!r.skipExist||b===void 0)&&e.updateStore(X(e.store,g,j(F)[0].value))}}}})},c;r.entities?c=r.entities:r.namePathList?(c=[],r.namePathList.forEach(function(o){var u=t.get(o);if(u){var l;(l=c).push.apply(l,j(j(u).map(function(v){return v.entity})))}})):c=a,s(c)},this.resetFields=function(r){e.warningUnhooked();var t=e.store;if(!r){e.updateStore(le({},e.initialValues)),e.resetWithFieldInitialValue(),e.notifyObservers(t,null,{type:"reset"}),e.notifyWatch();return}var a=r.map(_);a.forEach(function(s){var c=e.getInitialValue(s);e.updateStore(X(e.store,s,c))}),e.resetWithFieldInitialValue({namePathList:a}),e.notifyObservers(t,a,{type:"reset"}),e.notifyWatch(a)},this.setFields=function(r){e.warningUnhooked();var t=e.store,a=[];r.forEach(function(s){var c=s.name,o=s.errors,u=fe(s,Lt),l=_(c);a.push(l),"value"in u&&e.updateStore(X(e.store,l,u.value)),e.notifyObservers(t,[l],{type:"setField",data:s})}),e.notifyWatch(a)},this.getFields=function(){var r=e.getFieldEntities(!0),t=r.map(function(a){var s=a.getNamePath(),c=a.getMeta(),o=R(R({},c),{},{name:s,value:e.getFieldValue(s)});return Object.defineProperty(o,"originRCField",{value:!0}),o});return t},this.initEntityValue=function(r){var t=r.props.initialValue;if(t!==void 0){var a=r.getNamePath(),s=Q(e.store,a);s===void 0&&e.updateStore(X(e.store,a,t))}},this.isMergedPreserve=function(r){var t=r!==void 0?r:e.preserve;return t!=null?t:!0},this.registerField=function(r){e.fieldEntities.push(r);var t=r.getNamePath();if(e.notifyWatch([t]),r.props.initialValue!==void 0){var a=e.store;e.resetWithFieldInitialValue({entities:[r],skipExist:!0}),e.notifyObservers(a,[r.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(s,c){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(e.fieldEntities=e.fieldEntities.filter(function(v){return v!==r}),!e.isMergedPreserve(c)&&(!s||o.length>1)){var u=s?void 0:e.getInitialValue(t);if(t.length&&e.getFieldValue(t)!==u&&e.fieldEntities.every(function(v){return!xe(v.getNamePath(),t)})){var l=e.store;e.updateStore(X(l,t,u,!0)),e.notifyObservers(l,[t],{type:"remove"}),e.triggerDependenciesUpdate(l,t)}}e.notifyWatch([t])}},this.dispatch=function(r){switch(r.type){case"updateValue":{var t=r.namePath,a=r.value;e.updateValue(t,a);break}case"validateField":{var s=r.namePath,c=r.triggerName;e.validateFields([s],{triggerName:c});break}default:}},this.notifyObservers=function(r,t,a){if(e.subscribable){var s=R(R({},a),{},{store:e.getFieldsValue(!0)});e.getFieldEntities().forEach(function(c){var o=c.onStoreChange;o(r,t,s)})}else e.forceRootUpdate()},this.triggerDependenciesUpdate=function(r,t){var a=e.getDependencyChildrenFields(t);return a.length&&e.validateFields(a),e.notifyObservers(r,a,{type:"dependenciesUpdate",relatedFields:[t].concat(j(a))}),a},this.updateValue=function(r,t){var a=_(r),s=e.store;e.updateStore(X(e.store,a,t)),e.notifyObservers(s,[a],{type:"valueUpdate",source:"internal"}),e.notifyWatch([a]);var c=e.triggerDependenciesUpdate(s,a),o=e.callbacks.onValuesChange;if(o){var u=_e(e.store,[a]);o(u,e.getFieldsValue())}e.triggerOnFieldsChange([a].concat(j(c)))},this.setFieldsValue=function(r){e.warningUnhooked();var t=e.store;if(r){var a=le(e.store,r);e.updateStore(a)}e.notifyObservers(t,null,{type:"valueUpdate",source:"external"}),e.notifyWatch()},this.setFieldValue=function(r,t){e.setFields([{name:r,value:t}])},this.getDependencyChildrenFields=function(r){var t=new Set,a=[],s=new te;e.getFieldEntities().forEach(function(o){var u=o.props.dependencies;(u||[]).forEach(function(l){var v=_(l);s.update(v,function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Set;return g.add(o),g})})});var c=function o(u){var l=s.get(u)||new Set;l.forEach(function(v){if(!t.has(v)){t.add(v);var g=v.getNamePath();v.isFieldDirty()&&g.length&&(a.push(g),o(g))}})};return c(r),a},this.triggerOnFieldsChange=function(r,t){var a=e.callbacks.onFieldsChange;if(a){var s=e.getFields();if(t){var c=new te;t.forEach(function(u){var l=u.name,v=u.errors;c.set(l,v)}),s.forEach(function(u){u.errors=c.get(u.name)||u.errors})}var o=s.filter(function(u){var l=u.name;return ie(r,l)});a(o,s)}},this.validateFields=function(r,t){e.warningUnhooked();var a=!!r,s=a?r.map(_):[],c=[];e.getFieldEntities(!0).forEach(function(l){if(a||s.push(l.getNamePath()),(t==null?void 0:t.recursive)&&a){var v=l.getNamePath();v.every(function(F,b){return r[b]===F||r[b]===void 0})&&s.push(v)}if(!(!l.props.rules||!l.props.rules.length)){var g=l.getNamePath();if(!a||ie(s,g)){var O=l.validateRules(R({validateMessages:R(R({},Te),e.validateMessages)},t));c.push(O.then(function(){return{name:g,errors:[],warnings:[]}}).catch(function(F){var b,m=[],w=[];return(b=F.forEach)===null||b===void 0||b.call(F,function(y){var S=y.rule.warningOnly,C=y.errors;S?w.push.apply(w,j(C)):m.push.apply(m,j(C))}),m.length?Promise.reject({name:g,errors:m,warnings:w}):{name:g,errors:m,warnings:w}}))}}});var o=jt(c);e.lastValidatePromise=o,o.catch(function(l){return l}).then(function(l){var v=l.map(function(g){var O=g.name;return O});e.notifyObservers(e.store,v,{type:"validateFinish"}),e.triggerOnFieldsChange(v,l)});var u=o.then(function(){return e.lastValidatePromise===o?Promise.resolve(e.getFieldsValue(s)):Promise.reject([])}).catch(function(l){var v=l.filter(function(g){return g&&g.errors.length});return Promise.reject({values:e.getFieldsValue(s),errorFields:v,outOfDate:e.lastValidatePromise!==o})});return u.catch(function(l){return l}),u},this.submit=function(){e.warningUnhooked(),e.validateFields().then(function(r){var t=e.callbacks.onFinish;if(t)try{t(r)}catch(a){console.error(a)}}).catch(function(r){var t=e.callbacks.onFinishFailed;t&&t(r)})},this.forceRootUpdate=i});function At(n){var i=E.useRef(),e=E.useState({}),r=ae(e,2),t=r[1];if(!i.current)if(n)i.current=n;else{var a=function(){t({})},s=new Tt(a);i.current=s.getForm()}return[i.current]}const Oe=At;var Ce=E.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),Ye=function(i){var e=i.validateMessages,r=i.onFormChange,t=i.onFormFinish,a=i.children,s=E.useContext(Ce),c=E.useRef({});return E.createElement(Ce.Provider,{value:R(R({},s),{},{validateMessages:R(R({},s.validateMessages),e),triggerFormChange:function(u,l){r&&r(u,{changedFields:l,forms:c.current}),s.triggerFormChange(u,l)},triggerFormFinish:function(u,l){t&&t(u,{values:l,forms:c.current}),s.triggerFormFinish(u,l)},registerForm:function(u,l){u&&(c.current=R(R({},c.current),{},ne({},u,l))),s.registerForm(u,l)},unregisterForm:function(u){var l=R({},c.current);delete l[u],c.current=l,s.unregisterForm(u)}})},a)};const Mt=Ce;var It=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"],_t=function(i,e){var r=i.name,t=i.initialValues,a=i.fields,s=i.form,c=i.preserve,o=i.children,u=i.component,l=u===void 0?"form":u,v=i.validateMessages,g=i.validateTrigger,O=g===void 0?"onChange":g,F=i.onValuesChange,b=i.onFieldsChange,m=i.onFinish,w=i.onFinishFailed,y=fe(i,It),S=E.useContext(Mt),C=Oe(s),L=ae(C,1),k=L[0],T=k.getInternalHooks(q),N=T.useSubscribe,$=T.setInitialValues,M=T.setCallbacks,K=T.setValidateMessages,h=T.setPreserve,f=T.destroyForm;E.useImperativeHandle(e,function(){return k}),E.useEffect(function(){return S.registerForm(r,k),function(){S.unregisterForm(r)}},[S,k,r]),K(R(R({},S.validateMessages),v)),M({onValuesChange:F,onFieldsChange:function(U){if(S.triggerFormChange(r,U),b){for(var H=arguments.length,Qe=new Array(H>1?H-1:0),ce=1;ce<H;ce++)Qe[ce-1]=arguments[ce];b.apply(void 0,[U].concat(Qe))}},onFinish:function(U){S.triggerFormFinish(r,U),m&&m(U)},onFinishFailed:w}),h(c);var d=E.useRef(null);$(t,!d.current),d.current||(d.current=!0),E.useEffect(function(){return f},[]);var p,V=typeof o=="function";if(V){var P=k.getFieldsValue(!0);p=o(P,k)}else p=o;N(!V);var I=E.useRef();E.useEffect(function(){pt(I.current||[],a||[])||k.setFields(a||[]),I.current=a},[a,k]);var W=E.useMemo(function(){return R(R({},k),{},{validateTrigger:O})},[k,O]),x=E.createElement(ee.Provider,{value:W},p);return l===!1?x:E.createElement(l,oe({},y,{onSubmit:function(U){U.preventDefault(),U.stopPropagation(),k.submit()},onReset:function(U){var H;U.preventDefault(),k.resetFields(),(H=y.onReset)===null||H===void 0||H.call(y,U)}}),x)};const Ut=_t;function Be(n){try{return JSON.stringify(n)}catch{return Math.random()}}var Wt=function(){};function xt(){for(var n=arguments.length,i=new Array(n),e=0;e<n;e++)i[e]=arguments[e];var r=i[0],t=r===void 0?[]:r,a=i[1],s=(0,E.useState)(),c=ae(s,2),o=c[0],u=c[1],l=(0,E.useMemo)(function(){return Be(o)},[o]),v=(0,E.useRef)(l);v.current=l;var g=(0,E.useContext)(ee),O=a||g,F=O&&O._init,b=_(t),m=(0,E.useRef)(b);return m.current=b,Wt(b),(0,E.useEffect)(function(){if(!!F){var w=O.getFieldsValue,y=O.getInternalHooks,S=y(q),C=S.registerWatch,L=C(function(T){var N=Q(T,m.current),$=Be(N);v.current!==$&&(v.current=$,u(N))}),k=Q(w(),m.current);return u(k),L}},[F]),o}const Je=xt;var Ht=E.forwardRef(Ut),re=Ht;re.FormProvider=Ye,re.Field=Ve,re.List=Ke,re.useForm=Oe,re.useWatch=Je;const Dt=re}}]);
